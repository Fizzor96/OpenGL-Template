cmake_minimum_required(VERSION 3.20.0)
project(Application VERSION 0.1.0)
set(EXECUTABLE_OUTPUT_PATH "bin")
set(BUILD_SHARED_LIBS OFF)
add_subdirectory(deps)
find_package(OpenGL REQUIRED)

if(NOT UNIX)
    set(OpenGL_GL_PREFERENCE GLVND)
    list(APPEND ALL_LIBS OpenGL::GL)
    add_executable(${CMAKE_PROJECT_NAME} WIN32 main.cpp)
else()
    set(OpenGL_GL_PREFERENCE LEGACY)
    list(APPEND ALL_LIBS OpenGL::OpenGL)
    add_executable(${CMAKE_PROJECT_NAME} main.cpp)
endif()

target_include_directories(${CMAKE_PROJECT_NAME} BEFORE PUBLIC deps/glfw-3.3.8/include PUBLIC deps/glew-2.2.0/include PUBLIC deps/glm/include PUBLIC .)
target_link_libraries(${CMAKE_PROJECT_NAME} glfw glew_s glm::glm)
target_compile_options(${CMAKE_PROJECT_NAME} PUBLIC -g -Wall -Wunused -Wno-dev)